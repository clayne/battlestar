const hi = "Hello from mode 13h$"

fun graphics_mode
    // 320x200 256 colors
    ah = 0    // function 0
    al = 0x13 // mode 13h
    int(10)
end

fun text_mode
    ah = 0 
    al = 3
    int(10)
end

fun wait_for_keypress
    // Wait for keypress
    ah = 0x10
    int(16)
end

fun main
    graphics_mode

    // Paint the screen red

    // cx = 0x7d00
    loop 0x7d00
        // push 0xa000
        // pop es
        // di = 0
        start 0xa000:0
        // ax = 0x2727
        value 0x2727
    // if value was 16-bit: rep stosw, if value was 8-bit: rep stosb
    endloop

    wait_for_keypress
    text_mode
end

// vim: set syntax=c ts=4 sw=4 et:
